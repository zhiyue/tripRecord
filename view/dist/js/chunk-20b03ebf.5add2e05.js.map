{"version":3,"sources":["webpack:///./src/views/test/About.vue?4000","webpack:///./src/views/test/About.vue?3ffb","webpack:///src/views/test/About.vue","webpack:///./src/views/test/About.vue?ffda","webpack:///./src/views/test/About.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","mapOnDelete","_v","mapPath","pathSimplifier","staticRenderFns","name","components","mounted","createTrip","watchMap","setTimeout","data","map","watchID","methods","navigator","geolocation","watchPosition","window","AMap","Map","resizeEnable","zoom","center","plugin","Geolocation","enableHighAccuracy","timeout","buttonPosition","buttonOffset","Pixel","zoomToAccuracy","that","addControl","getCurrentPosition","status","result","console","log","event","addListener","localOnComplete","localOnError","ControlBar","e","clearWatch","lineArr","marker","Marker","position","icon","offset","autoRotation","angle","passedPolyline","Polyline","path","showDir","strokeColor","strokeWeight","setPath","passedPath","setFitView","moveAlong","AMapUI","load","PathSimplifier","$","supportCanvas","pathSimplifierIns","zIndex","getPath","points","pathData","lnglatList","i","len","length","push","lnglat","getHoverTitle","pointIndex","renderOptions","renderAllPointsIfNumberBelow","setData","navg0","createPathNavigator","loop","speed","start","info","alert","component"],"mappings":"uIAAA,yBAA2sB,EAAG,G,yCCA9sB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,GAAK,SAASH,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIS,cAAc,CAACT,EAAIU,GAAG,YAAYN,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIW,UAAU,CAACX,EAAIU,GAAG,SAASN,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIY,iBAAiB,CAACZ,EAAIU,GAAG,UAAU,IACpaG,EAAkB,G,oCCUtB,GACEC,KAAM,cACNC,WAAY,OAAd,OAAc,CAAd,GACA,oBAEEC,QALF,WAMIf,KAAKgB,aACLhB,KAAKiB,WACLC,YAAW,WACT,EAAN,cACA,OAEEC,KAZF,WAaI,MAAO,CACLC,IAAK,KACLC,QAAS,OAGbC,QAAS,CACPL,SADJ,WAEM,IAAN,OACMjB,KAAKqB,QAAUE,UAAUC,YAAYC,eAC3C,YACQ,QAAR,gBACQ,IAAR,WACQ,QAAR,iCAKA,WACQ,EAAR,4BACQ,EAAR,kBAIIT,WAlBJ,WAmBM,EAAN,uBACM,IAAN,OACMhB,KAAKoB,IAAM,IAAIM,OAAOC,KAAKC,IAAI,MAAO,CACpCC,cAAc,EAEdC,KAAM,GAGNC,OAAQ,CAAC,UAAW,YAEtB/B,KAAKoB,IAAIY,OAAO,CAAC,mBAAoB,oBAAoB,WACvD,IAAIR,EAAc,IAAIE,OAAOC,KAAKM,YAAY,CAC5CC,oBAAoB,EACpBC,QAAS,IACTC,eAAgB,KAChBC,aAAc,IAAIX,OAAOC,KAAKW,MAAM,GAAI,IACxCC,gBAAgB,IAGlBC,EAAKpB,IAAIqB,WAAWjB,GACpBA,EAAYkB,oBAAmB,SAAUC,EAAQC,GAC/C,EAAV,YACyB,aAAXD,GACFE,QAAQC,IAAI,QACZD,QAAQC,IAAIF,KAEZC,QAAQC,IAAI,QACZD,QAAQC,IAAIF,OAGhBlB,OAAOC,KAAKoB,MAAMC,YAAYxB,EAAa,WAAYgB,EAAKS,iBAC5DvB,OAAOC,KAAKoB,MAAMC,YAAYxB,EAAa,QAASgB,EAAKU,cAEzDV,EAAKpB,IAAIqB,WAAW,IAAIf,OAAOC,KAAKwB,eAEtCnD,KAAKoB,IAAIb,GAAG,YAAY,WAEtBsC,QAAQC,IAAI,cAIhBG,gBA5DJ,SA4DA,GACMJ,QAAQC,IAAI,UACZD,QAAQC,IAAIM,IAGdF,aAjEJ,SAiEA,GACML,QAAQC,IAAI,UACZD,QAAQC,IAAIM,GACZ,EAAN,0BAGI5C,YAvEJ,WAyEM,IAAN,OACMe,UAAUC,YAAY6B,WAAWb,EAAKnB,SACtCwB,QAAQC,IAAI,WAGdpC,QA9EJ,WA+EM,IAAN,OACU4C,EAAU,CAAC,CAAC,WAAY,WAAY,CAAC,WAAY,WAAY,CAAC,UAAW,WAAY,CAAC,UAAW,WAAY,CAAC,WAAY,WAAY,CAAC,WAAY,WAAY,CAAC,WAAY,WAAY,CAAC,WAAY,WAAY,CAAC,WAAY,WAAY,CAAC,WAAY,WAAY,CAAC,UAAW,UAAW,CAAC,WAAY,WAAY,CAAC,WAAY,UAAW,CAAC,WAAY,WAAY,CAAC,WAAY,YAQjXC,EAAS,IAAI7B,OAAOC,KAAK6B,OAAO,CAClCpC,IAAKoB,EAAKpB,IACVqC,SAAU,CAAC,WAAY,WACvBC,KAAM,yCACNC,OAAQ,IAAIjC,OAAOC,KAAKW,OAAO,IAAK,IACpCsB,cAAc,EACdC,OAAQ,KAcNC,GAVW,IAAIpC,OAAOC,KAAKoC,SAAS,CACtC3C,IAAKoB,EAAKpB,IACV4C,KAAMV,EACNW,SAAS,EACTC,YAAa,OAEbC,aAAc,IAIK,IAAIzC,OAAOC,KAAKoC,SAAS,CAC5C3C,IAAKoB,EAAKpB,IAEV8C,YAAa,MAEbC,aAAc,KAIhBZ,EAAOhD,GAAG,UAAU,SAAU6C,GAC5BU,EAAeM,QAAQhB,EAAEiB,eAG3B7B,EAAKpB,IAAIkD,aACTf,EAAOgB,UAAUjB,EAAS,MAG5B3C,eA7HJ,WA8HM,IAAN,OACMe,OAAO8C,OAAOC,KAAK,CAAC,yBAA0B,UAAU,SAAUC,EAAgBC,GAChF,GAAKD,EAAeE,cAApB,CAKA,IAAIC,EAAoB,IAAIH,EAAe,CACzCI,OAAQ,IAER1D,IAAKoB,EAAKpB,IAEV2D,QAAS,SAAnB,KAIY,IAHA,IAAIC,EAASC,EAASD,OAClBE,EAAa,GAERC,EAAI,EAAGC,EAAMJ,EAAOK,OAAQF,EAAIC,EAAKD,IAC5CD,EAAWI,KAAKN,EAAOG,GAAGI,QAG5B,OAAOL,GAETM,cAAe,SAAzB,OACY,OAAIC,GAAc,EAETR,EAASpE,KAAO,IAAMoE,EAASD,OAAOS,GAAY5E,KAGpDoE,EAASpE,KAAO,OAASoE,EAASD,OAAOK,QAElDK,cAAe,CAEbC,6BAA8B,OAIlCjE,OAAOmD,kBAAoBA,EAG3BA,EAAkBe,QAAQ,CAAC,CACzB/E,KAAM,MACNmE,OAAQ,CAAC,CACPnE,KAAM,KACN0E,OAAQ,CAAC,WAAY,YACjC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,WAAY,WACjC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,UAAW,YAChC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,WAAY,YACjC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,WAAY,YACjC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,WAAY,WACjC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,WAAY,YACjC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,SAAU,YAC/B,CACY1E,KAAM,KACN0E,OAAQ,CAAC,UAAW,YAChC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,UAAW,WAChC,CACY1E,KAAM,KACN0E,OAAQ,CAAC,SAAU,YAC/B,CACY1E,KAAM,KACN0E,OAAQ,CAAC,SAAU,gBAKvB,IAAIM,EAAQhB,EAAkBiB,oBAAoB,EAAG,CACnDC,MAAM,EACNC,MAAO,MAETH,EAAMI,QACNpB,EAAkBtE,GAAG,cAAc,SAAU6C,EAAG8C,GAC9CrD,QAAQC,IAAI,UAAYoD,EAAKjB,SAASD,OAAOkB,EAAKT,YAAY5E,cApF9DsF,MAAM,yBC9Jkb,I,wBCQ9bC,EAAY,eACd,EACAtG,EACAc,GACA,EACA,KACA,WACA,MAIa,aAAAwF,E","file":"js/chunk-20b03ebf.5add2e05.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@2.1.1@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&id=12432dc9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@2.1.1@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&id=12432dc9&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\"},[_c('div',{attrs:{\"id\":\"map\"}}),_c('md-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.mapOnDelete}},[_vm._v(\"停止实时定位\")]),_c('md-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.mapPath}},[_vm._v(\"轨迹图\")]),_c('md-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.pathSimplifier}},[_vm._v(\"巡航图\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"map\">\n    <div id=\"map\"></div>\n    <md-button type=\"primary\" @click=\"mapOnDelete\">停止实时定位</md-button>\n    <md-button type=\"primary\" @click=\"mapPath\">轨迹图</md-button>\n    <md-button type=\"primary\" @click=\"pathSimplifier\">巡航图</md-button>\n  </div>\n</template>\n\n<script>\nimport { Button, Toast } from 'mand-mobile'\nexport default {\n  name: 'mapLocation',\n  components: {\n    [Button.name]: Button\n  },\n  mounted () {\n    this.createTrip()\n    this.watchMap()\n    setTimeout(() => {\n      Toast.hide()\n    }, 15000)\n  },\n  data () {\n    return {\n      map: null,\n      watchID: null // 实时监听\n    }\n  },\n  methods: {\n    watchMap () {\n      let that = this\n      this.watchID = navigator.geolocation.watchPosition(\n        function (position) {\n          console.log('实时定位中---')\n          let gps = position.coords\n          console.log([gps.latitude, gps.longitude])\n        //   window.AMap.convertFrom([gps.latitude, gps.longitude], 'gps', function (status, result) {\n        //     console.log(result)\n        //   })\n        },\n        function () {\n          Toast.failed('实时定位出错，请尝试刷新')\n          that.mapOnDelete()\n        }\n      )\n    },\n    createTrip () {\n      Toast.loading('加载中...')\n      let that = this\n      this.map = new window.AMap.Map('map', {\n        resizeEnable: true, // 是否监控地图容器尺寸变化\n        // mapStyle: 'amap://styles/light', // 设置地图的显示样式\n        zoom: 11, // 初始化地图层级\n        // viewMode: '3D', // 地图模式\n        // pitch: 75, // 地图俯仰角度，有效范围 0 度- 83 度\n        center: [126.60421, 43.83378] // 初始地图中心点\n      })\n      this.map.plugin(['AMap.Geolocation', 'AMap.ControlBar'], function () {\n        var geolocation = new window.AMap.Geolocation({\n          enableHighAccuracy: true, // 是否使用高精度定位，默认:true\n          timeout: 10000, // 超过10秒后停止定位，默认：5s\n          buttonPosition: 'RB', // 定位按钮的停靠位置\n          buttonOffset: new window.AMap.Pixel(10, 20), // 定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)\n          zoomToAccuracy: true // 定位成功后是否自动调整地图视野到定位点\n        })\n        // 定位插件---------------------------------------------------------\n        that.map.addControl(geolocation)\n        geolocation.getCurrentPosition(function (status, result) {\n          Toast.hide()\n          if (status === 'complete') {\n            console.log('定位成功')\n            console.log(result)\n          } else {\n            console.log('定位失败')\n            console.log(result)\n          }\n        })\n        window.AMap.event.addListener(geolocation, 'complete', that.localOnComplete) // 返回定位信息\n        window.AMap.event.addListener(geolocation, 'error', that.localOnError) // 返回定位出错信息\n        // 罗盘插件---------------------------------------------------------\n        that.map.addControl(new window.AMap.ControlBar())\n      })\n      this.map.on('complete', function () {\n        // 地图图块加载完成后触发\n        console.log('地图加载完成')\n      })\n    },\n    // 监听手动定位成功\n    localOnComplete (e) {\n      console.log('手动定位成功')\n      console.log(e)\n    },\n    // 手动定位失败\n    localOnError (e) {\n      console.log('手动定位出错')\n      console.log(e)\n      Toast.failed('定位出错请尝试刷新')\n    },\n    // 停止实时定位\n    mapOnDelete () {\n      // this.map.destroy()\n      let that = this\n      navigator.geolocation.clearWatch(that.watchID)\n      console.log('停止实时定位')\n    },\n    // 移动轨迹图\n    mapPath () {\n      let that = this\n      var lineArr = [[126.567402, 43.923187], [126.567402, 43.923129], [126.56744, 43.923098], [126.56759, 43.923024], [126.567794, 43.923024], [126.567928, 43.922912], [126.568169, 43.922819], [126.568486, 43.922723], [126.568598, 43.922881], [126.568727, 43.923074], [126.56884, 43.92319], [126.569274, 43.923055], [126.569564, 43.92348], [126.569859, 43.923944], [126.569172, 43.924199]]\n      // var arr = []// 经纬度坐标数组\n      // arr.push(new window.AMap.LngLat('116.368904', '39.913423'))\n      // arr.push(new window.AMap.LngLat('116.382122', '39.901176'))\n      // arr.push(new window.AMap.LngLat('116.387271', '39.912501'))\n      // arr.push(new window.AMap.LngLat('116.398258', '39.904600'))\n      // arr.push(new window.AMap.LngLat('116.427097', '39.912500'))\n      // console.log(Math.round(window.AMap.GeometryUtil.distanceOfLine(arr)))\n      var marker = new window.AMap.Marker({\n        map: that.map,\n        position: [126.567402, 43.923187],\n        icon: 'https://webapi.amap.com/images/car.png',\n        offset: new window.AMap.Pixel(-26, -13),\n        autoRotation: true,\n        angle: -90\n      })\n\n      // 绘制轨迹\n      var polyline = new window.AMap.Polyline({\n        map: that.map,\n        path: lineArr,\n        showDir: true,\n        strokeColor: '#28F', // 线颜色\n        // strokeOpacity: 1,     //线透明度\n        strokeWeight: 6 // 线宽\n        // strokeStyle: \"solid\"  //线样式\n      })\n\n      var passedPolyline = new window.AMap.Polyline({\n        map: that.map,\n        // path: lineArr,\n        strokeColor: 'red', // 线颜色\n        // strokeOpacity: 1,     //线透明度\n        strokeWeight: 6 // 线宽\n        // strokeStyle: \"solid\"  //线样式\n      })\n\n      marker.on('moving', function (e) {\n        passedPolyline.setPath(e.passedPath)\n      })\n\n      that.map.setFitView()\n      marker.moveAlong(lineArr, 200)\n    },\n    // 巡航图\n    pathSimplifier () {\n      let that = this\n      window.AMapUI.load(['ui/misc/PathSimplifier', 'lib/$'], function (PathSimplifier, $) {\n        if (!PathSimplifier.supportCanvas) {\n          alert('当前环境不支持 Canvas！')\n          return\n        }\n\n        var pathSimplifierIns = new PathSimplifier({\n          zIndex: 100,\n          // autoSetFitView:false,\n          map: that.map, // 所属的地图实例\n\n          getPath: function (pathData, pathIndex) {\n            var points = pathData.points\n            var lnglatList = []\n\n            for (var i = 0, len = points.length; i < len; i++) {\n              lnglatList.push(points[i].lnglat)\n            }\n\n            return lnglatList\n          },\n          getHoverTitle: function (pathData, pathIndex, pointIndex) {\n            if (pointIndex >= 0) {\n              // point\n              return pathData.name + '，' + pathData.points[pointIndex].name\n            }\n\n            return pathData.name + '，点数量' + pathData.points.length\n          },\n          renderOptions: {\n\n            renderAllPointsIfNumberBelow: 100 // 绘制路线节点，如不需要可设置为-1\n          }\n        })\n\n        window.pathSimplifierIns = pathSimplifierIns\n\n        // 设置数据\n        pathSimplifierIns.setData([{\n          name: '路线0',\n          points: [{\n            name: '点a',\n            lnglat: [116.405289, 39.904987]\n          }, {\n            name: '点b',\n            lnglat: [113.964458, 40.54664]\n          }, {\n            name: '点c',\n            lnglat: [111.47836, 41.135964]\n          }, {\n            name: '点d',\n            lnglat: [108.949297, 41.670904]\n          }, {\n            name: '点e',\n            lnglat: [106.380111, 42.149509]\n          }, {\n            name: '点f',\n            lnglat: [103.774185, 42.56996]\n          }, {\n            name: '点g',\n            lnglat: [101.135432, 42.930601]\n          }, {\n            name: '点h',\n            lnglat: [98.46826, 43.229964]\n          }, {\n            name: '点i',\n            lnglat: [95.777529, 43.466798]\n          }, {\n            name: '点j',\n            lnglat: [93.068486, 43.64009]\n          }, {\n            name: '点k',\n            lnglat: [90.34669, 43.749086]\n          }, {\n            name: '点l',\n            lnglat: [87.61792, 43.793308]\n          }]\n        }])\n\n        // 选中路线0\n        var navg0 = pathSimplifierIns.createPathNavigator(0, {\n          loop: true, // 循环播放\n          speed: 1000000\n        })\n        navg0.start()\n        pathSimplifierIns.on('pointClick', function (e, info) {\n          console.log('Click: ' + info.pathData.points[info.pointIndex].name)\n        })\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.map {\n  width: 100%;\n  height: 100%;\n}\n#map {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=12432dc9&scoped=true&\"\nimport script from \"./About.vue?vue&type=script&lang=js&\"\nexport * from \"./About.vue?vue&type=script&lang=js&\"\nimport style0 from \"./About.vue?vue&type=style&index=0&id=12432dc9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12432dc9\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}